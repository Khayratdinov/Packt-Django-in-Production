# –ì–ª–∞–≤–µ 2: –ò–∑—É—á–µ–Ω–∏–µ Django ORM, –º–æ–¥–µ–ª–µ–π –∏ –º–∏–≥—Ä–∞—Ü–∏–π


---

## üìÇ –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### README
- [**README –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**](./README-ru.md): –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ.
- [**README in English**](./README.md): Main information about the project.

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- [**–ù–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**](./docs/ReviewQuestions-ru.md): –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è.
- [**In English**](./docs/ReviewQuestions-en.md): Review questions for understanding key concepts.

---


## üõ† –ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≥–ª–∞–≤—ã

–í –¥–∞–Ω–Ω–æ–π –≥–ª–∞–≤–µ –∞–≤—Ç–æ—Ä –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É Django —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª Django ORM –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥–µ–ª—è–º–∏. –°–Ω–∞—á–∞–ª–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –µ–≥–æ –∫ Django-–ø—Ä–æ–µ–∫—Ç—É (–≤–º–µ—Å—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π SQLite). –ó–∞—Ç–µ–º –ø–æ–∫–∞–∑–∞–Ω–æ, –∫–∞–∫ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏, —É—á–∏—Ç—ã–≤–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–≤—è–∑–µ–π (ForeignKey, ManyToMany, OneToOne) –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏. –û—Ç–¥–µ–ª—å–Ω–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —É–¥–µ–ª–µ–Ω–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞–º –º–∏–≥—Ä–∞—Ü–∏–∏ (makemigrations, migrate), –≤–æ–∑–º–æ–∂–Ω—ã–º ¬´–ø–æ–¥–≤–æ–¥–Ω—ã–º –∫–∞–º–Ω—è–º¬ª –ø—Ä–∏ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ –ø—Ä–∏ –æ–±—Ä–∞—Ç–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏—è—Ö. –¢–∞–∫–∂–µ –∞–≤—Ç–æ—Ä –ø—Ä–∏–≤–æ–¥–∏—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ select_related –∏ prefetch_related. –ó–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –≥–ª–∞–≤–∞ –æ–±–∑–æ—Ä–æ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ ORM, –ø–æ—è–≤–∏–≤—à–µ–≥–æ—Å—è –≤ Django 4.1.

---

### üìö –ö–ª—é—á–µ–≤—ã–µ —Ç–µ–º—ã:

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Django**  
   - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å —É–¥–∞–ª—ë–Ω–Ω—ã–º PostgreSQL-—Å–µ—Ä–≤–µ—Ä–æ–º (ElephantSQL –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π).  
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ settings.py (ENGINE, HOST, NAME, USER, PORT, PASSWORD).  
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ psycopg2-binary –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

2. **–†–∞–±–æ—Ç–∞ —Å –º–æ–¥–µ–ª—è–º–∏ –∏ Django ORM**  
   - –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (Author, Blog –∏ –¥—Ä.) –∏ —Å–≤—è–∑—å –∏—Ö —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.  
   - –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è (CharField, EmailField, TextField) –∏ –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (null, blank, default).  
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π auto_now –∏ auto_now_add –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫.  
   - –ò–∑–±–µ–≥–∞–Ω–∏–µ ¬´—Å—ã—Ä—ã—Ö¬ª (raw) SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ä–∞–±–æ—Ç–∞ —Å query expressions, –º–µ—Ç–æ–¥–∞–º–∏ F, aggregate –∏ –¥—Ä.  
   - –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–µ–≤–µ—Ä—Å–∏–≤–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (blog_set –¥–ª—è ForeignKey) –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ related_name.

3. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–≤—è–∑–µ–π –≤ Django**  
   - OneToOneField, ForeignKey, ManyToManyField: –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –∫–æ–≥–¥–∞ —Å–ª–µ–¥—É–µ—Ç –∏—Ö –ø—Ä–∏–º–µ–Ω—è—Ç—å.  
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ on_delete (CASCADE, PROTECT, RESTRICT –∏ —Ç.–¥.) –∏ –∏—Ö –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö.  
   - –¢–∏–ø—ã –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π: –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã (abstract = True), multi-table inheritance –∏ proxy models.

4. **Django –º–∏–≥—Ä–∞—Ü–∏–∏: –º–µ—Ö–∞–Ω–∏–∫–∞ –∏ —Ç–æ–Ω–∫–æ—Å—Ç–∏**  
   - –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã makemigrations –∏ migrate, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –∏ —Ç–∞–±–ª–∏—Ü–∞ django_migrations.  
   - ¬´–û–±—Ä–∞—Ç–Ω—ã–µ¬ª –º–∏–≥—Ä–∞—Ü–∏–∏ (reverse) –∏ fake-–º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é –≤–Ω–µ—Å—ë–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.  
   - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã: –≥–¥–µ —Å—Ç–æ–∏—Ç –∏–∑–±–µ–≥–∞—Ç—å data-migration —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏, –ø–æ—á–µ–º—É –Ω—É–∂–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è.

5. **–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å ORM**  
   - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π (TimeStampedBaseModel).  
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å timezone.now(), –∏–∑–±–µ–≥–∞–Ω–∏–µ circular dependency —Å –ø–æ–º–æ—â—å—é —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö —Å—Å—ã–ª–æ–∫ –Ω–∞ –º–æ–¥–µ–ª–∏.  
   - –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–µ—Ç–æ–¥ __str__ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤.  
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ model methods –∏ model managers, –≤—ã–±–æ—Ä —Ç–∏–ø–∞ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ (Integer ID vs UUID).  
   - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (transaction.atomic) –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –º–∞—Å—Å–æ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.  
   - –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏–µ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ GenericForeignKey.

6. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**  
   - –ê–Ω–∞–ª–∏–∑ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ explain –∏ analyze.  
   - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ (Meta.indexes), –∫–æ–≥–¥–∞ —ç—Ç–æ –æ–ø—Ä–∞–≤–¥–∞–Ω–Ω–æ, –∏ –æ–≥–æ–≤–æ—Ä–∫–∏ –æ —Å–Ω–∏–∂–µ–Ω–∏–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∑–∞–ø–∏—Å–∏.  
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ select_related –¥–ª—è ForeignKey –∏ OneToOneField –∏ prefetch_related –¥–ª—è ManyToMany –∏ reverse lookup.  
   - –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å bulk_create, bulk_update, get_or_create, update_or_create.  
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (CONN_MAX_AGE, statement_timeout) –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.

7. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π ORM –≤ Django 4.1**  
   - –ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä –Ω–æ–≤–æ–π async-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ Django ORM.  
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∏ –ø–æ–¥—Ö–æ–¥–∞ —Å async/await (aget –≤–º–µ—Å—Ç–æ get).  
   - –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤ async) –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

---

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å –≥–ª–∞–≤—ã ‚Äî –ø–æ–º–æ—á—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –≥–ª—É–±–∂–µ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Django ORM –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞. –ê–≤—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –∏ –∏–∑–±–µ–≥–∞—Ç—å —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–µ—Ç—Å—è –≤–∞–∂–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤, –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —É–º–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ ORM –¥–ª—è –±–æ–ª–µ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.